转矩脉动、摩擦力补偿 edit
功能简介
转矩脉动辨识完成后，开启转矩脉动补偿开关，可以进行转矩脉动补偿；开启摩擦力补偿开关，可以进行摩擦力补偿。
字典说明
| 参数名称             | 字典名称                          | 主索引 | 子索引 | 数据类型 | 参数范围     | 读写权限 | 单位 | 字典指令值含义  |
| -------------------- | --------------------------------- | ------ | ------ | -------- | ------------ | -------- | ---- | --------------- |
| 转矩脉动补偿开关     | Torque Ripple Compensation Enable | 0x3559 | 0x00   | UNS8     | 0~1          | RW       | -    | 0：关闭 1：开启 |
| 摩擦补偿开关         | Friction Compensation Enable      | 0x355A | 0x00   | UNS8     | 0~1          | RW       | -    | 0：关闭 1：开启 |
| 静摩擦对应的转矩电流 | Static Friction Current           | 0x3531 | 0x00   | UNS32    | 0~4294967295 | RW       | mA   |                 |
转矩脉动补偿开关 3559h-00h
开启转矩脉动补偿开关且转矩脉动辨识完成后，可以减小转矩脉动引起的位置误差。
摩擦补偿开关 355Ah-00h
开启摩擦补偿开关且转矩脉动辨识完成后，可以减小换向时引起的位置误差。
静摩擦对应的转矩电流 3531h-00h
转矩脉动补偿辨识之后会得到一个摩擦对应的转矩电流，这个值也可以手动设置，效果就是在电流输出时增加补偿。运行力矩模式，设置一个非 0 的目标力矩，可以查看到力矩指令值与目标力矩不相等，不相等的就是补偿的部分。
功能应用
转矩脉动补偿和摩擦力补偿，需要在进行完其他辨识模式后，电机可以正常运行时，再进行转矩脉动辨识。
转矩脉动补偿
完成其他所有辨识模式后，电机进入速度模式，调节位置增益使得位置跟随误差较小时，再启动转矩脉动辨识才能得到较好的效果，原因是电机先需要准确的进行位置控制，才能更好的建立转子绝对位置与转矩脉动的映射关系。运行过程中，电机会按照 1RPM 的转速进行旋转，期间对转矩脉动进行识别，辨识完成后停止运动，转矩脉动补偿数据将自动保存到 FLASH。
注意：如果是增量式 AB 编码器，因为无法得知转子绝对位置，每次重新上电需要重新进行转矩脉动辨识才能进行有效补偿。在只有霍尔传感器反馈的电机不建议进行转矩脉动辨识补偿，因为位置反馈的精度太低，补偿效果大打折扣。如果是 ABZ 编码器则辨识完成后，系统复位，电机需要旋转到 Z 相后，驱动器得到了转子的绝对位置信息才会对转矩脉动有效补偿。
对于电机控制来说，转矩脉动相当于负载干扰，所以转矩脉动辨识应当在空载下进行，辨识过程中也会对库伦静摩擦进行辨识。
注：转矩脉动补偿目前只支持带绝对位置信息的旋转电机。
摩擦力补偿
转矩脉动辨识过程中也会对库伦静摩擦进行辨识，辨识完成后可输出静摩擦对应的转矩电流，也可手动修改静摩擦力对应的转矩电流。
转矩脉动辨识完成后，开启摩擦力补偿开关，可进行摩擦力补偿。