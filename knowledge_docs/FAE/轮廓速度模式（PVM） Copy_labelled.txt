轮廓速度模式（PVM） Copy
功能简介
速度轮廓模式，即 profile velocity mode。给定目标速度以及设置速度曲线的加速度，减速度，伺服内部的轨迹发生器会生成一系列速度指令给伺服的控制系统。
字典说明
轮廓速度模式相关参数
| 参数名称               | 字典名称                            | 主索引 | 子索引 | 数据类型  | 参数范围                 | 读写权限 | 单位                              | 字典指令值含义                                                                                                                                                                                                                                                                                                                                                               |
| ---------------------- | ----------------------------------- | ------ | ------ | --------- | ------------------------ | -------- | --------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 运行模式指令           | Operation Mode Command              | 0x6060 | 0x00   | INTEGER8  | -128~127                 | RW       | -                                 | 0x01：位置模式 0x03：速度模式 0x04：力矩模式 0x06：回零模式 0x0B：力控模式 0x3C：往复运动模式 0x16：模拟量控速度模式 0x17：模拟量控力矩模式 0x1F：脉冲控位置模式 0x3D：参考信号模式 0x2A：PWM 控速模式 0x3E：多段运行模式 0xFF：电气辨识 0xFE：方向辨识 0xFC：极对数辨识 0xFB：Z 相辨识 0xFD：霍尔辨识 0xFA：电角度辨识 0xF9：机械辨识 0xF7：机械特性辨识 0xF8：转矩脉动辨识 |
| 控制字                 | DS402 Controlword                   | 0x6040 | 0x00   | UNS16     | 0~65535                  | RW       | -                                 | 0x01：位置模式 0x03：速度模式 0x04：力矩模式 0x06：回零模式 0x0B：力控模式 0x3C：往复运动模式 0x16：模拟量控速度模式 0x17：模拟量控力矩模式 0x1F：脉冲控位置模式 0x3D：参考信号模式 0x2A：PWM 控速模式 0x3E：多段运行模式 0xFF：电气辨识 0xFE：方向辨识 0xFC：极对数辨识 0xFB：Z 相辨识 0xFD：霍尔辨识 0xFA：电角度辨识 0xF9：机械辨识 0xF7：机械特性辨识 0xF8：转矩脉动辨识 |
| 速度控制模式           | Velocity Control Mode               | 0x3611 | 0x00   | UNS8      | -                        | RW       | -                                 | 0：位置指令控制。1：速度指令控制。                                                                                                                                                                                                                                                                                                                                           |
| 电机最大转速/速度(RPM) | Motor Maximum Speed RPM             | 0x6080 | 0x00   | UNS32     | 1 ~ 4294967295           | RW       | RPM                               |                                                                                                                                                                                                                                                                                                                                                                              |
| 速度目标值             | Velocity Target Value               | 0x60FF | 0x00   | INTEGER32 | -2147483648~2147483647   | RW       | VelCU（速度坐标转换，用户单位）   |                                                                                                                                                                                                                                                                                                                                                                              |
| 应用速度限制           | Application Speed Limit             | 0x607F | 0x00   | UNS32     | 0 ~ 4294967295           | RW       | VelUU（单位转换，用户单位）       |                                                                                                                                                                                                                                                                                                                                                                              |
| 速度到达检测窗口       | Velocity Target Reached Window      | 0x606D | 0x00   | UNS16     | 0 ~ 65535                | RW       | VeUU（速度单位转换，用户单位）    |                                                                                                                                                                                                                                                                                                                                                                              |
| 速度到达检测窗口时间   | Velocity Target Reached Window Time | 0x606E | 0x00   | UNS16     | 0~65535                  | RW       | ms                                |                                                                                                                                                                                                                                                                                                                                                                              |
| 零速检测窗口           | Velocity Zero Window                | 0x606F | 0x00   | UNS16     | 0 ~ 65535                | RW       | VeUU（速度单位转换，用户单位）    |                                                                                                                                                                                                                                                                                                                                                                              |
| 零速检测窗口时间       | Velocity Zero Window Time           | 0x6070 | 0x00   | UNS16     | 0 ~ 65535                | RW       | ms                                |                                                                                                                                                                                                                                                                                                                                                                              |
| 正向力矩限制相对值     | Positive Torque Limit Relative      | 0x60E0 | 0x00   | UNS16     | 0~65535                  | RW       | 0.1%（额定转矩的千分比）          | 0：关闭正向力矩限制功能其他值：正向力矩限制启用                                                                                                                                                                                                                                                                                                                              |
| 负向力矩限制相对值     | Negative Torque Limit Relative      | 0x60E1 | 0x00   | UNS16     | 0~65535                  | RW       | 0.1%（额定转矩的千分比）          | 0：关闭负向力矩限制功能其他值：负向力矩限制启用                                                                                                                                                                                                                                                                                                                              |
| 轮廓加速度             | Profile Acceleration                | 0x6083 | 0x00   | UNS32     | 0 ~ 4294967295           | RW       | AccUU（加速度单位转换，用户单位） |                                                                                                                                                                                                                                                                                                                                                                              |
| 轮廓减速度             | Profile Deceleration                | 0x6084 | 0x00   | UNS32     | 0 ~ 4294967295           | RW       | AccUU（加速度单位转换，用户单位） | 0：无滤波。1：TD 滤波。2：滑动均值滤波                                                                                                                                                                                                                                                                                                                                       |
| 应用加速度限制         | Application Acceleration Limit      | 0x60C5 | 0x00   | UNS32     | 0 ~ 4294967295           | RW       | AccUU（加速度单位转换，用户单位） |                                                                                                                                                                                                                                                                                                                                                                              |
| 应用减速度限制         | Application Deceleration Limit      | 0x60C6 | 0x00   | UNS32     | 0 ~ 4294967295           | RW       | AccUU（加速度单位转换，用户单位） | TD 滤波时，平滑系数指数范围-3~3；滑动均值滤波时，平滑系数指数为-1。                                                                                                                                                                                                                                                                                                          |
| 平滑滤波类型           | Motion Profile Type                 | 0x6086 | 0x00   | INTEGER16 | -32768~32767             | RW       | -                                 |                                                                                                                                                                                                                                                                                                                                                                              |
| 平滑系数               | Smoothing Factor                    | 0x3534 | 0x00   | UNS32     | 0 ~ 4294967295           | RW       | -                                 |                                                                                                                                                                                                                                                                                                                                                                              |
| 平滑系数单位指数       | Smoothing Factor Index              | 0x364B | 0x00   | INTEGER8  | -3~3                     | RW       | -                                 |                                                                                                                                                                                                                                                                                                                                                                              |
| 状态字                 | DS402 Statusword                    | 0x6041 | 0x00   | UNS16     | -                        | RW       | -                                 |                                                                                                                                                                                                                                                                                                                                                                              |
| 电机运行状态           | Motor Operation Status              | 0x3005 | 0x00   | UNS8      | 0~255                    | RO       | -                                 |                                                                                                                                                                                                                                                                                                                                                                              |
| 当前运行模式           | Operation Mode Actual               | 0x6061 | 0x00   | INTEGER8  | -                        | RO       | -                                 | 0x01：位置模式 0x03：速度模式 0x04：力矩模式 0x06：回零模式 0x0B：力控模式 0x3C：往复运动模式 0x16：模拟量控速度模式 0x17：模拟量控力矩模式 0x1F：脉冲控位置模式 0x3D：参考信号模式 0x2A：PWM 控速模式 0x3E：多段运行模式 0xFF：电气辨识 0xFE：方向辨识 0xFC：极对数辨识 0xFB：Z 相辨识 0xFD：霍尔辨识 0xFA：电角度辨识 0xF9：机械辨识 0xF7：机械特性辨识 0xF8：转矩脉动辨识 |
| 位置指令值             | Position Demand Value               | 0x6062 | 0x00   | INTEGER32 | -2147483648 ~ 2147483647 | RO       | PosCU（位置坐标转换，用户单位）   |                                                                                                                                                                                                                                                                                                                                                                              |
| 电机端位置当前值       | Motor Position Actual Value         | 0x3572 | 0x00   | INTEGER32 | -2147483648 ~ 2147483647 | RO       | PosCU（位置坐标转换，用户单位）   |                                                                                                                                                                                                                                                                                                                                                                              |
| 负载端位置当前值       | Load Position Actual Value          | 0x6064 | 0x00   | INTEGER32 | -2147483648 ~ 2147483647 | RO       | PosCU（位置坐标转换，用户单位）   |                                                                                                                                                                                                                                                                                                                                                                              |
| 电机端位置误差         | Motor Position Error Value          | 0x3573 | 0x00   | INTEGER32 | -2147483648 ~ 2147483647 | RO       | PosCU（位置坐标转换，用户单位）   |                                                                                                                                                                                                                                                                                                                                                                              |
| 负载端位置误差         | Load Position Error Value           | 0x60F4 | 0x00   | INTEGER32 | -2147483648 ~ 2147483647 | RO       | PosCU（位置坐标转换，用户单位）   |                                                                                                                                                                                                                                                                                                                                                                              |
| 速度指令值             | Velocity Demand Value               | 0x606B | 0x00   | INTEGER32 | -2147483648~2147483647   | RO       | VelCU（速度坐标转换，用户单位）   |                                                                                                                                                                                                                                                                                                                                                                              |
| 电机端速度当前值       | Motor Velocity Actual Value         | 0x3574 | 0x00   | INTEGER32 | -2147483648~2147483647   | RO       | VelCU（速度坐标转换，用户单位）   |                                                                                                                                                                                                                                                                                                                                                                              |
| 负载端速度当前值       | Load Velocity Actual Value          | 0x606C | 0x00   | INTEGER32 | -2147483648~2147483647   | RO       | VelCU（速度坐标转换，用户单位）   |                                                                                                                                                                                                                                                                                                                                                                              |
| 电机端速度误差值       | Motor Velocity Error Value          | 0x3575 | 0x00   | INTEGER32 | -2147483648~2147483647   | RO       | VelCU（速度坐标转换，用户单位）   |                                                                                                                                                                                                                                                                                                                                                                              |
| 负载端速度误差值       | Load Velocity Error Value           | 0x351E | 0x00   | INTEGER32 | -2147483648~2147483647   | RO       | VelCU（速度坐标转换，用户单位）   |                                                                                                                                                                                                                                                                                                                                                                              |
| 电机端速度观测器当前值 | Motor Speed Observer Actual Value   | 0x3604 | 0x00   | INTEGER32 | -2147483648~2147483647   | RO       | VelCU（速度坐标转换，用户单位）   |                                                                                                                                                                                                                                                                                                                                                                              |
| 负载端速度观测器当前值 | Load Speed Observer Actual Value    | 0x3605 | 0x00   | INTEGER32 | -2147483648~2147483647   | RO       | VelCU（速度坐标转换，用户单位）   |                                                                                                                                                                                                                                                                                                                                                                              |
| 电流当前值             | Current Actual Value                | 0x6078 | 0x00   | INTEGER16 | -32758~32767             | RO       | TqCU（转矩坐标转换，用户单位‰）  |                                                                                                                                                                                                                                                                                                                                                                              |
| 电流误差值             | Current Error Value                 | 0x351F | 0x00   | INTEGER32 | -2147483648~2147483647   | RO       | TqCU（转矩坐标转换，用户单位 mA） |                                                                                                                                                                                                                                                                                                                                                                              |
轮廓速度模式指令参数
轮廓速度模式指令参数-控制命令类
运行模式指令 6060h-00h
运动模式（0x6060-0x00）设置为 3 时，表示轮廓速度模式，此时当前运行模式（0x6061-0x00）为 3。任意运行模式在使能或者失能的状态下都可以切换到轮廓速度模式。
控制字 6040h-00h
控制字释义表
轮廓速度模式下 bit4~bit6
轮廓速度模式下的控制命令和状态切换
轮廓速度模式指令参数-速度类
| 参数名称               | 字典名称                            | 主索引 | 子索引 | 数据类型  | 参数范围               | 读写权限 | 单位                            | 字典指令值含义                     |
| ---------------------- | ----------------------------------- | ------ | ------ | --------- | ---------------------- | -------- | ------------------------------- | ---------------------------------- |
| 速度控制模式           | Velocity Control Mode               | 0x3611 | 0x00   | UNS8      | -                      | RW       | -                               | 0：位置指令控制。1：速度指令控制。 |
| 电机最大转速/速度(RPM) | Motor Maximum Speed RPM             | 0x6080 | 0x00   | UNS32     | 1 ~ 4294967295         | RW       | RPM                             |                                    |
| 速度目标值             | Velocity Target Value               | 0x60FF | 0x00   | INTEGER32 | -2147483648~2147483647 | RW       | VelCU（速度坐标转换，用户单位） |                                    |
| 应用速度限制           | Application Speed Limit             | 0x607F | 0x00   | UNS32     | 0 ~ 4294967295         | RW       | VelUU（单位转换，用户单位）     |                                    |
| 速度到达检测窗口       | Velocity Target Reached Window      | 0x606D | 0x00   | UNS16     | 0 ~ 65535              | RW       | VeUU（速度单位转换，用户单位）  |                                    |
| 速度到达检测窗口时间   | Velocity Target Reached Window Time | 0x606E | 0x00   | UNS16     | 0~65535                | RW       | ms                              |                                    |
| 零速检测窗口           | Velocity Zero Window                | 0x606F | 0x00   | UNS16     | 0 ~ 65535              | RW       | VeUU（速度单位转换，用户单位）  |                                    |
| 零速检测窗口时间       | Velocity Zero Window Time           | 0x6070 | 0x00   | UNS16     | 0 ~ 65535              | RW       | ms                              |                                    |
速度控制模式 3611h-00h
速度控制模式包括位置指令控制（0）和速度指令控制（1）。
电机最大转速 6080h-00h
电机最大转速（6080h） ≥ 应用速度限制（607Fh）。
速度目标值 60FFh-00h
用户输入的速度目标值不受应用速度限制值限制。电机实际运行速度受应用速度限制值限制。
应用速度限制 607Fh-00h
应用速度限制（607Fh）≤ 电机最大转速（6080h）。
电机实际运行速度 ≤ 应用限制速度。
应用速度限制不限制目标轮廓速度的值。当目标轮廓速度 > 应用速度限制时，轮廓速度模式下电机实际速度 = 应用速度限制。
速度到达检测窗口 606Dh-00h
| 电机当前速度 - 速度目标值 | ≤ 速度到达检测窗口且持续速度到达检测窗口时间，则认为速度到达。
速度到达检测窗口时间 606Eh-00h
| 电机当前速度 - 速度目标值 | ≤ 速度到达检测窗口时开始计时，| 电机当前速度 - 目标速度 |> 速度到达检测窗口时清零。
零速检测窗口 606Fh-00h
| 电机当前速度 | 在零速检测窗口范围内且持续零速检测窗口时间，则认为零速到达。
零速检测窗口时间 6070h-00h
| 电机当前速度 | ≤ 零速检测窗口时开始计时，| 电机当前速度 | > 零速检测窗口时清零。
轮廓速度模式指令参数-转矩类
正向力矩限制相对值 60E0h-00h
限制输出力矩的正向最大值，为电机额定转矩的百分比。
在所有运行模式下都生效。
示例：电机额定转矩（6076h）的值为 3000mNm，设置正向力矩限制相对值为 10%，那么实际上限制输出的力矩正向最大值为 300mNm。
负向力矩限制相对值 60E1h-00h
限制输出力矩的负向最大值，为电机额定转矩的百分比。
在所有运行模式下都生效。
示例：电机额定转矩（6076h）的值为 3000mNm，设置正向力矩限制相对值为 10%，那么实际上限制输出的力矩负向最大值为 300mNm。
轮廓速度模式指令参数-加减速类
轮廓加速度 6083h-00h
规划电机运行到指定位置过程中的加速度。加速度越大，电机速度到达目标轮廓速度越快，加速度越小，电机速度到达目标轮廓速度越慢。
轮廓加速度 ≤ 应用加速度限制（0x60C5-0x00）。
轮廓减速度 6084h-00h
规划电机运行到指定位置过程中的减速度。减速度越大，电机速度减到 0 越快，减速度越小，电机速度减到 0 越慢。
轮廓减速度 ≤ 应用减速度限制（0x60C6-0x00）。
应用加速度限制 60C5h-00h
应用加速度限制用于限制轮廓加速度（6083h-00h）、回零加速度（609Ah-00h）的输入值。
应用减速度限制 60C6h-00h
应用轮廓减速度用于限制轮廓减速（6084h-00h）、快速停止减速度（6085h-00h）的输入值。
轮廓速度模式指令参数-滤波类
平滑滤波类型 6086h-00h
平滑系数 3534h-00h
TD 滤波时，平滑系数范围 1~1000。
滑动均值滤波时，平滑系数范围 0.2~51.1ms。
平滑系数单位指数 364Bh-00h
与平滑系数的乘积为规划器的平滑程度。滑动均值滤波时，平滑系数单位指数为-1，不可修改。
平滑滤波类型为不滤波时，滤波系数不生效。平滑滤波类型为 TD 滤波或滑动均值滤波时，

以上媒体的描述: 图片中有一个公式，内容如下：
滤波系数 = 平滑系数 * 10^平滑系数单位指数
滤波系数越大，滤波效果越明显。
图 2.2.6-1  滤波效果图
轮廓速度模式监测参数
轮廓速度模式监测参数-状态类
状态字 6041h-00h
状态字释义表
状态字bit0-bit3，bit5，bit6 定义
状态字Bit10、Bit12、Bit13 定义
电机运行状态 3005h-00h
电机状态与伺服状态关系
当前运行模式 6061h-00h
反馈当前运行模式，出厂设置为 0，表示空模式，空模式可以切换到任意模式。
当运行模式指令 = 3 时，当前运行模式 = 3。
轮廓速度模式监测参数-位置类
位置指令值 6062h-00h
位置规划器的位置指令，用于规划位置轨迹。编码器位置按照位置指令值的规划进行运动。
电机端位置当前值 3572h-00h
双编码器控制时，为编码器 1 的位置当前值。
负载端位置当前值 6064h-00h
单编码器控制时，当前编码器类型为编码器 1 时，为编码器 1 位置当前值；当前编码器为编码器 2 时，为编码器 2 位置当前值。
双编码器控制时，为编码器 2 的位置当前值。
电机端位置误差 3573h-00h
电机端位置误差 = 位置规划值 - 电机端位置当前值。
双编码器控制时，为编码器 1 的位置误差。
负载端位置误差 60F4h-00h
负载端位置误差 = 位置规划值 - 负载端位置当前值。
负载端位置误差：单编码器控制时，为编码器 1 位置误差。双编码器控制时，指编码器 2 的位置误差。
轮廓速度模式监测参数-速度类
速度指令值 606Bh-00h
用于速度规划。电机的速度按照速度指令值的规划运行。
电机端速度当前值 3574h
双编码器控制时，为编码器 1 的速度当前值。
负载端速度当前值 606Ch
单编码器控制时，当前编码器为编码器 1 时，为编码器 1 速度当前值；当前编码器为编码器 2 时，为编码器 2 速度当前值。
双编码器控制时，为编码器 2 的速度当前值，此时负载端速度 = 电机端速度 *减速比。
减速比 = 齿轮比分子（3576h-00h）/ 齿轮比分母（3577h-00h）。
电机端速度误差值 3575h
电机端速度误差 = 速度规划值（606Bh-00h） - 电机端速度当前值（3574h-00h）。
双编码器控制时，为编码器 1 的速度误差。
负载端速度误差值 351Eh-00h
负载端速度误差 = 速度规划值（606Bh-00h） - 负载端速度当前值（606Ch-00h）。
单编码器控制时，为编码器 1 速度误差。双编码器控制时，指编码器 2 的速度误差。
电机端速度观测器当前值 3604h-00h
速度观测器速度用于内部速度控制的反馈速度。
双编码器控制时，为编码器 1 反馈速度。
负载端速度观测器当前值 3605h-00h
速度观测器速度用于内部速度控制的反馈速度。
单编码器控制时，当前编码器为编码器 1 时，为编码器反馈；当前编码器为编码器 2 时，为编码器 2 反馈速度。
双编码器控制时，为编码器 2 反馈速度。
轮廓速度模式监测参数-电流类
电流当前值 6078h-00h
驱动器当前电流值，受正向力矩限制和负向力矩限制。
当开启力矩限制时，-负向力矩限制相对值 * 电机额定电流 ≤ 当前电流值 ≤ 正向力矩限制相对值 * 电机额定电流。
电流误差值 351Fh-00h
电流误差值 = 力矩指令值（6074h-00h） - 电流当前值（6078h-00h）。
模式下控制字使用
模式动作对应的控制字：
模式设置流程
轮廓速度模式运行示例
轮廓速度模式正向运行
轮廓速度模式负向运行
轮廓速度模式运行中暂停后继续